<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Analysis of A* vs Dijkstra for Emergency Vehicle Routing</title>
  <meta name="description" content="A* vs Dijkstra for emergency vehicle routing on grid maps, with figures, results, and downloads.">
  
<style>
:root {
  --bg: #0b0f14; --card: #111826; --muted: #9fb0c8; --text: #e8f0ff;
  --accent: #60a5fa; --accent-2: #34d399; --border: #223041;
}
* { box-sizing: border-box; }
html, body { margin:0; padding:0; background:var(--bg); color:var(--text);
  font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }
.wrap { max-width: 1100px; margin: 0 auto; padding: 24px; }
header.card { background: linear-gradient(180deg, rgba(96,165,250,.18), rgba(71,85,105,.08));
  border: 1px solid var(--border); border-radius: 16px; padding: 28px; margin: 24px 0; }
h1 { font-size: 1.9rem; margin: 0 0 6px; letter-spacing: .2px; }
.subtitle { color: var(--muted); margin: 0 0 12px; }
.authors { margin: 12px 0 0; color: var(--muted); }
.authors a { color: var(--muted); }
nav { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }
.btn { display:inline-flex; align-items:center; gap:.5rem; background: #0f172a; border:1px solid var(--border);
  padding:10px 14px; border-radius: 12px; color: var(--text); text-decoration: none; }
.btn:hover { border-color: var(--accent); }
section.card { background: var(--card); border:1px solid var(--border); border-radius: 16px; padding: 24px; margin: 18px 0; }
h2 { font-size: 1.4rem; margin-top: 0; }
h3 { font-size: 1.2rem; margin-top: 24px; margin-bottom: 12px; }
h4 { font-size: 1.1rem; margin-top: 20px; margin-bottom: 8px; color: var(--accent); }
.grid-figs { display: grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap: 16px; }
figure { background:#0c1320; border:1px solid var(--border); border-radius:12px; padding:12px; margin:0; }
img { width:100%; height:auto; border-radius:8px; display:block; }
figcaption { font-size:.9rem; color: var(--muted); margin-top: 8px; }
.tbl { width:100%; border-collapse: collapse; overflow:auto; margin: 12px 0; }
.tbl th, .tbl td { border:1px solid var(--border); padding:10px 12px; text-align:center; }
.tbl thead th { background:#0f172a; }
.tbl .sub th { background:#0f172a; color: var(--muted); font-weight: normal; }
.callout { background: #0f172a; border:1px dashed var(--border); border-radius:12px; padding:12px 14px; color:var(--muted); }
footer { color: var(--muted); text-align:center; margin: 24px 0 60px; }
code, pre { background:#0f172a; border:1px solid var(--border); border-radius:8px; padding:2px 6px; }
pre { padding: 12px; overflow:auto; }
/* Anchor wrapper for figures */
a.figlink{display:block;color:inherit;text-decoration:none}
a.figlink figure:hover{border-color:#60a5fa}

.chart-select{background:#0c1320;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:6px 10px}
.chart-select:focus{outline:2px solid #60a5fa;outline-offset:1px}
</style>

</head>
<body>
  <div class="wrap">
    <header class="card">
      <h1>Analysis of A* vs Dijkstra for Emergency Vehicle Routing</h1>
      <p class="subtitle">CS5800 Project</p>
      <p class="authors">
        Sean Ando ·
        Ngoc Khanh Vy Le ·
        Divit Pratap Singh ·
        Aayushi Saraswat ·
        Zuzu Nyirakanyange
      </p>
      <nav>
        <a class="btn" href="#abstract">Abstract</a>
        <a class="btn" href="#results">Results (8×8 Grid)</a>
        <a class="btn" href="#figures">Figures (8×8 Grid)</a>
        <a class="btn" href="#results30">Results (30×30 Grid)</a>
        <a class="btn" href="#figures30">Figures (30×30 Grid)</a>
        <a class="btn" href="#quantitative">Quantitative Analysis</a>
        <a class="btn" href="#downloads">Downloads</a>
      </nav>
    </header>

    <section id="abstract" class="card">
      <h2>Abstract</h2>
      <p>We evaluate the <strong>A*</strong> search algorithm for emergency vehicle routing
      on grid-based urban maps and compare it against Dijkstra's algorithm. The study
      tests three conditions—0%, ~20%, and ~50% obstacle density—measuring expanded
      nodes and computation time. We use a Manhattan-distance heuristic for A*, which
      is admissible and returns optimal shortest paths on 4-neighborhood grids.</p>
      <div class="callout">
        <strong>Heuristic:</strong> Manhattan distance (admissible & consistent on 4-way grids).
        <strong>Goal:</strong> minimize expansions and compute time while preserving optimality.
      </div>
    </section>

    <section id="results" class="card">
      <h2>Results (8×8 Grid)</h2>
<div class="card" style="background:#0f172a;border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px">
  <div style="display:flex;gap:.6rem;align-items:center">
    <label for="metric8"><strong>Metric:</strong></label>
    <select id="metric8" class="chart-select">
      <option value="ExpandedNodes">Expanded Nodes</option>
      <option value="TimeSec">Time (sec)</option>
    </select>
    <span style="color:var(--muted)">Grouped bars compare A* vs Dijkstra.</span>
  </div>
  <canvas id="chart8" width="980" height="360" style="max-width:100%;margin-top:10px;display:block"></canvas>
  <div class="legend" style="margin-top:8px;color:var(--muted)">
    <span style="display:inline-block;width:10px;height:10px;background:#4f83ff;border-radius:2px;margin-right:6px"></span>A* &nbsp;&nbsp;
    <span style="display:inline-block;width:10px;height:10px;background:#34d399;border-radius:2px;margin-right:6px"></span>Dijkstra
  </div>
</div>
      
<table class="tbl">
  <thead>
    <tr>
      <th>Scenario</th>
      <th>Obstacles</th>
      <th>Free Cells</th>
      <th colspan="2">A*</th>
      <th colspan="2">Dijkstra</th>
    </tr>
    <tr class="sub">
      <th></th><th></th><th></th>
      <th>Expanded</th><th>Time</th>
      <th>Expanded</th><th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>No Obstacles (0%)</td>
      <td>0.0%</td>
      <td>100.0%</td>
      <td>14</td>
      <td>0.000021s</td>
      <td>63</td>
      <td>0.000109s</td>
    </tr>
    <tr>
      <td>Moderate Obstacles (20%)</td>
      <td>15.6%</td>
      <td>84.4%</td>
      <td>15</td>
      <td>0.000078s</td>
      <td>53</td>
      <td>0.000174s</td>
    </tr>
    <tr>
      <td>High Obstacles (50%)</td>
      <td>42.2%</td>
      <td>57.8%</td>
      <td>25</td>
      <td>0.000068s</td>
      <td>34</td>
      <td>0.000075s</td>
    </tr>
  </tbody>
</table>
    </section>

    <section id="figures" class="card">
      <h2>Figures (8×8 Grid)</h2>
      <div class="grid-figs">
    <a class="figlink" href="viewer.html?src=images%2Fastar_0.png&alt=No+Obstacles+%280%25%29+%E2%80%94+A%2A" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_0.png" alt="No Obstacles (0%) — A*" loading="lazy">
        <figcaption>No Obstacles (0%) — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fastar_20.png&alt=20%25+Obstacles+%E2%80%94+A%2A" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_20.png" alt="20% Obstacles — A*" loading="lazy">
        <figcaption>20% Obstacles — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fastar_50.png&alt=50%25+Obstacles+%E2%80%94+A%2A" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_50.png" alt="50% Obstacles — A*" loading="lazy">
        <figcaption>50% Obstacles — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_0.png&alt=No+Obstacles+%280%25%29+%E2%80%94+Dijkstra" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_0.png" alt="No Obstacles (0%) — Dijkstra" loading="lazy">
        <figcaption>No Obstacles (0%) — Dijkstra</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_20.png&alt=20%25+Obstacles+%E2%80%94+Dijkstra" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_20.png" alt="20% Obstacles — Dijkstra" loading="lazy">
        <figcaption>20% Obstacles — Dijkstra</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_50.png&alt=50%25+Obstacles+%E2%80%94+Dijkstra" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_50.png" alt="50% Obstacles — Dijkstra" loading="lazy">
        <figcaption>50% Obstacles — Dijkstra</figcaption>
      </figure>
    </a>
    </div>
    </section>

    <section id="results30" class="card">
      <h2>Additional Tests: Results (30×30 Grid)</h2>
<div class="card" style="background:#0f172a;border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px">
  <div style="display:flex;gap:.6rem;align-items:center">
    <label for="metric30"><strong>Metric:</strong></label>
    <select id="metric30" class="chart-select">
      <option value="ExpandedNodes">Expanded Nodes</option>
      <option value="TimeSec">Time (sec)</option>
    </select>
    <span style="color:var(--muted)">Grouped bars compare A* vs Dijkstra.</span>
  </div>
  <canvas id="chart30" width="980" height="360" style="max-width:100%;margin-top:10px;display:block"></canvas>
  <div class="legend" style="margin-top:8px;color:var(--muted)">
    <span style="display:inline-block;width:10px;height:10px;background:#4f83ff;border-radius:2px;margin-right:6px"></span>A* &nbsp;&nbsp;
    <span style="display:inline-block;width:10px;height:10px;background:#34d399;border-radius:2px;margin-right:6px"></span>Dijkstra
  </div>
</div>
      
<table class="tbl">
  <thead>
    <tr>
      <th>Scenario (30×30 Grid)</th>
      <th>Obstacles</th>
      <th>Free Cells</th>
      <th colspan="2">A*</th>
      <th colspan="2">Dijkstra</th>
    </tr>
    <tr class="sub">
      <th></th><th></th><th></th>
      <th>Expanded</th><th>Time</th>
      <th>Expanded</th><th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>No Obstacles (0%)</td>
      <td>0.0%</td>
      <td>100.0%</td>
      <td>59</td>
      <td>0.000108s</td>
      <td>899</td>
      <td>0.001187s</td>
    </tr>
    <tr>
      <td>Moderate Obstacles (20%)</td>
      <td>20.7%</td>
      <td>79.3%</td>
      <td>78</td>
      <td>0.000314s</td>
      <td>710</td>
      <td>0.002126s</td>
    </tr>
    <tr>
      <td>High Obstacles (50%)</td>
      <td>47.3%</td>
      <td>52.7%</td>
      <td>111</td>
      <td>0.000155s</td>
      <td>208</td>
      <td>0.000288s</td>
    </tr>
  </tbody>
</table>
    </section>

    <section id="figures30" class="card">
      <h2>Additional Tests: Figures (30×30 Grid)</h2>
      <div class="grid-figs">
    <a class="figlink" href="viewer.html?src=images%2Fastar_30_0.png&alt=No+Obstacles+%280%25%29+%E2%80%94+A%2A+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_30_0.png" alt="No Obstacles (0%) — A* (30×30 Grid)" loading="lazy">
        <figcaption>No Obstacles (0%) — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fastar_30_20.png&alt=20%25+Obstacles+%E2%80%94+A%2A+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_30_20.png" alt="20% Obstacles — A* (30×30 Grid)" loading="lazy">
        <figcaption>20% Obstacles — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fastar_30_50.png&alt=50%25+Obstacles+%E2%80%94+A%2A+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/astar_30_50.png" alt="50% Obstacles — A* (30×30 Grid)" loading="lazy">
        <figcaption>50% Obstacles — A*</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_30_0.png&alt=No+Obstacles+%280%25%29+%E2%80%94+Dijkstra+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_30_0.png" alt="No Obstacles (0%) — Dijkstra (30×30 Grid)" loading="lazy">
        <figcaption>No Obstacles (0%) — Dijkstra</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_30_20.png&alt=20%25+Obstacles+%E2%80%94+Dijkstra+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_30_20.png" alt="20% Obstacles — Dijkstra (30×30 Grid)" loading="lazy">
        <figcaption>20% Obstacles — Dijkstra</figcaption>
      </figure>
    </a>
    
    <a class="figlink" href="viewer.html?src=images%2Fdijkstra_30_50.png&alt=50%25+Obstacles+%E2%80%94+Dijkstra+%2830%C3%9730+Grid%29" target="_blank" rel="noopener">
      <figure class="zoomable">
        <img src="images/dijkstra_30_50.png" alt="50% Obstacles — Dijkstra (30×30 Grid)" loading="lazy">
        <figcaption>50% Obstacles — Dijkstra</figcaption>
      </figure>
    </a>
    </div>
    </section>

    <section id="quantitative" class="card">
      <h2>Quantitative Analysis of A* and Dijkstra</h2>
      
      <!-- Single Interactive Analysis Box -->
      <div class="card" style="background:#0f172a;border:1px solid var(--border);border-radius:12px;padding:12px;margin-bottom:16px">
        <div style="display:flex;gap:12px;align-items:center;margin-bottom:16px;flex-wrap:wrap">
          <label for="analysisType"><strong>Analysis Type:</strong></label>
          <select id="analysisType" class="chart-select">
            <option value="speedup-nodes">Speedup Analysis - Nodes</option>
            <option value="speedup-time">Speedup Analysis - Time</option>
            <option value="scale-nodes">Scale-up Factor Analysis - Nodes</option>
            <option value="scale-time">Scale-up Factor Analysis - Time</option>
            <option value="efficiency-nodes">Efficiency Gains - Nodes</option>
            <option value="efficiency-time">Efficiency Gains - Time</option>
            <option value="pooled-nodes">Overall Performance - Nodes</option>
            <option value="pooled-time">Overall Performance - Time</option>
          </select>
          
          <span id="chartDescription" style="color:var(--muted);margin-left:12px">Higher bars indicate greater A* advantage.</span>
        </div>
        
        <canvas id="quantChart" width="980" height="360" style="max-width:100%;margin-top:10px;display:block"></canvas>
        <div id="quantLegend" class="legend" style="margin-top:8px;color:var(--muted)">
          <span style="display:inline-block;width:10px;height:10px;background:#f59e0b;border-radius:2px;margin-right:6px"></span>8×8 Grid &nbsp;&nbsp;
          <span style="display:inline-block;width:10px;height:10px;background:#8b5cf6;border-radius:2px;margin-right:6px"></span>30×30 Grid
        </div>
      </div>

      <!-- Dynamic Tables Container -->
      <div id="quantTables">
        <!-- Tables will be inserted here dynamically -->
      </div>

      <div class="callout" style="margin-top:16px">
        <strong>Key Findings:</strong> A* consistently outperforms Dijkstra across all scenarios. The advantage is most pronounced in open environments (no obstacles) and scales better with grid size. On average, A* uses <strong>84.68% fewer node expansions</strong> and runs <strong>81.28% faster</strong> than Dijkstra when pooled across all test conditions.
      </div>
    </section>

<section id="downloads" class="card">
  <h2>Downloads & Data</h2>
  <ul> 
    <li>Full paper · <a href="assets/A_Implementation_and_Analysis_for_Emergency_Vehicle_Routing_Report.pdf" download>PDF</a></li>
        <li>All raw data · <a href="assets/raw_data_txt.zip" download>ZIP</a></li>
  </ul>

  <h3>8×8 Grid Cases</h3>
  <ul>
    <li>Case 1 raw results · <a href="images/astar_0.png" download>A* figure</a> · <a href="images/dijkstra_0.png" download>Dijkstra figure</a> · <a href="assets/astar_dijkstra_case_1.txt" download>Data</a></li>
<li>Case 2 raw results · <a href="images/astar_20.png" download>A* figure</a> · <a href="images/dijkstra_20.png" download>Dijkstra figure</a> · <a href="assets/astar_dijkstra_case_2.txt" download>Data</a></li>
<li>Case 3 raw results · <a href="images/astar_50.png" download>A* figure</a> · <a href="images/dijkstra_50.png" download>Dijkstra figure</a> · <a href="assets/astar_dijkstra_case_3.txt" download>Data</a></li>
  </ul>

  <h3>30×30 Grid Cases</h3>
  <ul>
    <li>Case 1 raw results · <a href="images/astar_30_0.png" download>A* figure</a> · <a href="images/dijkstra_30_0.png" download>Dijkstra figure</a> · <a href="assets/large_astar_dijkstra_case_1.txt" download>Data</a></li>
<li>Case 2 raw results · <a href="images/astar_30_20.png" download>A* figure</a> · <a href="images/dijkstra_30_20.png" download>Dijkstra figure</a> · <a href="assets/large_astar_dijkstra_case_2.txt" download>Data</a></li>
<li>Case 3 raw results · <a href="images/astar_30_50.png" download>A* figure</a> · <a href="images/dijkstra_30_50.png" download>Dijkstra figure</a> · <a href="assets/large_astar_dijkstra_case_3.txt" download>Data</a></li>
  </ul>
</section>

    <footer>
      © 2025 Sean A. Built as CS5800 Project.
    </footer>
  </div>

<script>
(function(){
  // Parse a results table inside a section (8x8 or 30x30)
  function toNumber(x){
    if (typeof x === 'number') return x;
    if (!x) return NaN;
    const s = String(x).replace(/[^0-9eE\.\-]+/g, ''); // strip %, s, etc.
    return parseFloat(s);
  }
  
  function parseTable(sectionId){
    const sec = document.getElementById(sectionId);
    if(!sec) return [];
    const tbl = sec.querySelector('table');
    if(!tbl) return [];
    const rows = Array.from(tbl.querySelectorAll('tbody tr'));
    const data = [];
    rows.forEach(tr => {
      const tds = Array.from(tr.children).map(td => td.textContent.trim());
      const scenario = tds[0];
      const aExpanded = toNumber(tds[3]);
      const aTime     = toNumber(tds[4]);
      const dExpanded = toNumber(tds[5]);
      const dTime     = toNumber(tds[6]);
      data.push({Scenario:scenario, Algorithm:'A*', ExpandedNodes:aExpanded, TimeSec:aTime});
      data.push({Scenario:scenario, Algorithm:'Dijkstra', ExpandedNodes:dExpanded, TimeSec:dTime});
    });
    return data;
  }

  // Nice 1-2-5 tick step
  function niceStep(max, wanted){
    if(!isFinite(max) || max <= 0) return 1;
    const step0 = max / Math.max(1, wanted);
    const p10 = Math.pow(10, Math.floor(Math.log10(step0)));
    const err = step0 / p10;
    if (err >= 5) return 5*p10;
    if (err >= 2) return 2*p10;
    return p10;
  }

  function makeBarChart(canvasId, selectId, DATA){
    const canvas = document.getElementById(canvasId);
    const select = document.getElementById(selectId);
    if(!canvas || !select) return;
    const ctx = canvas.getContext('2d');

    function draw(metric){
      // HiDPI scaling
      const DPR = window.devicePixelRatio || 1;
      const cssW = canvas.clientWidth || canvas.width;
      const cssH = canvas.clientHeight || canvas.height;
      canvas.width = Math.max(1, Math.floor(cssW * DPR));
      canvas.height = Math.max(1, Math.floor(cssH * DPR));
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(DPR, DPR);

      const W = cssW, H = cssH;
      let padR = 20, padT = 22, padB = 48;
      let padL = 60; // provisional; adjusted after measuring labels

      // Build groups per scenario
      const scenarios = [...new Set(DATA.map(d=>d.Scenario))];
      const groups = scenarios.map(sc => ({
        scenario: sc,
        a: Number((DATA.find(d=>d.Scenario===sc && d.Algorithm==='A*')||{})[metric]) || 0,
        d: Number((DATA.find(d=>d.Scenario===sc && d.Algorithm==='Dijkstra')||{})[metric]) || 0
      }));

      // Axis limits
      const vals = groups.flatMap(g=>[g.a,g.d]);
      const maxRaw = Math.max(...vals, 0);
      let step = niceStep(maxRaw, 4);
      let ymax = Math.max(step, Math.ceil(maxRaw / step) * step);
      let ticksCount = Math.round(ymax / step);

      // Measure tick labels to set left padding
      ctx.font = '12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      let maxLabelW = 0;
      for(let i=0;i<=ticksCount;i++){
        const v = i * step;
        const s = (metric==='TimeSec' ? v.toFixed(6) : String(Math.round(v)));
        const w = ctx.measureText(s).width;
        if (w > maxLabelW) maxLabelW = w;
      }
      padL = Math.max(60, Math.ceil(maxLabelW) + 16);
      const chartW = Math.max(1, W - padL - padR);
      const chartH = Math.max(1, H - padT - padB);

      // Clear & styles
      ctx.clearRect(0,0,W,H);
      const border = getComputedStyle(document.documentElement).getPropertyValue('--border') || '#223041';
      const muted  = getComputedStyle(document.documentElement).getPropertyValue('--muted') || '#9fb0c8';
      const fg     = getComputedStyle(document.body).color || '#e8f0ff';

      // Axes + grid
      ctx.strokeStyle = border; ctx.lineWidth = 1;
      ctx.beginPath(); ctx.moveTo(padL, padT); ctx.lineTo(padL, padT+chartH); ctx.lineTo(padL+chartW, padT+chartH); ctx.stroke();
      ctx.fillStyle = muted; ctx.textAlign='right';
      for(let i=0;i<=ticksCount;i++){
        const y = padT + chartH - (i/ticksCount)*chartH;
        ctx.beginPath(); ctx.moveTo(padL, y); ctx.lineTo(padL+chartW, y); ctx.stroke();
        const val = i * step;
        const label = (metric==='TimeSec' ? val.toFixed(6) : String(Math.round(val)));
        ctx.fillText(label, padL-6, y+4);
      }

      // Bars
      const colA = '#4f83ff', colD = '#34d399';
      const n = scenarios.length;
      const groupW = chartW / Math.max(1, n);
      const barW = Math.min(28, Math.max(6, (groupW - 20)/2));
      ctx.textAlign = 'center';
      groups.forEach((g,i)=>{
        const gx = padL + i*groupW + groupW/2;
        const hA = (g.a / ymax) * chartH;
        const hD = (g.d / ymax) * chartH;
        ctx.fillStyle = colA; ctx.fillRect(gx - barW - 4, padT + chartH - hA, barW, hA);
        ctx.fillStyle = colD; ctx.fillRect(gx + 4, padT + chartH - hD, barW, hD);
        
        // Use shorter labels for chart display
        let displayLabel = g.scenario;
        if (g.scenario.includes('No Obstacles')) displayLabel = 'No Obstacles (0%)';
        else if (g.scenario.includes('Moderate')) displayLabel = 'Moderate Obstacles (20%)';
        else if (g.scenario.includes('High')) displayLabel = 'High Obstacles (50%)';
        
        ctx.fillStyle = muted; 
        ctx.fillText(displayLabel, gx, H - 10);
      });

      // Title
      ctx.textAlign = 'left'; ctx.fillStyle = fg;
      ctx.fillText(metric==='TimeSec' ? 'Computation Time (sec)' : 'Expanded Nodes', padL, 16);
    }

    select.addEventListener('change', ()=> draw(select.value));
    draw(select.value);
    window.addEventListener('resize', ()=> draw(select.value));
  }

  // Build datasets from tables and render original charts
  const DATA8  = parseTable('results');
  const DATA30 = parseTable('results30');
  makeBarChart('chart8','metric8',DATA8);
  makeBarChart('chart30','metric30',DATA30);

  // All table templates for quantitative analysis
  const TABLE_TEMPLATES = {
    'speedup-nodes': `
      <h4>Node Expansion Speedup (Dijkstra ÷ A*)</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>8×8 Grid</th>
            <th>30×30 Grid</th>
            <th>Improvement Factor</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>No Obstacles (0%)</td>
            <td>4.50×</td>
            <td>15.24×</td>
            <td>3.39× better on larger grid</td>
          </tr>
          <tr>
            <td>Moderate Obstacles (20%)</td>
            <td>3.53×</td>
            <td>9.10×</td>
            <td>2.58× better on larger grid</td>
          </tr>
          <tr>
            <td>High Obstacles (50%)</td>
            <td>1.36×</td>
            <td>1.87×</td>
            <td>1.38× better on larger grid</td>
          </tr>
          <tr style="background:#0f172a;">
            <td><strong>Average</strong></td>
            <td><strong>3.13×</strong></td>
            <td><strong>8.74×</strong></td>
            <td><strong>2.79× better scaling</strong></td>
          </tr>
        </tbody>
      </table>`,
    'speedup-time': `
      <h4>Time Speedup (Dijkstra Time ÷ A* Time)</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>8×8 Grid</th>
            <th>30×30 Grid</th>
            <th>Improvement Factor</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>No Obstacles (0%)</td>
            <td>5.19×</td>
            <td>10.99×</td>
            <td>2.12× better on larger grid</td>
          </tr>
          <tr>
            <td>Moderate Obstacles (20%)</td>
            <td>2.23×</td>
            <td>6.77×</td>
            <td>3.04× better on larger grid</td>
          </tr>
          <tr>
            <td>High Obstacles (50%)</td>
            <td>1.10×</td>
            <td>1.86×</td>
            <td>1.69× better on larger grid</td>
          </tr>
          <tr style="background:#0f172a;">
            <td><strong>Average</strong></td>
            <td><strong>2.84×</strong></td>
            <td><strong>6.54×</strong></td>
            <td><strong>2.30× better scaling</strong></td>
          </tr>
        </tbody>
      </table>`,
    'scale-nodes': `
      <h4>Node Expansion Scale Factors</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>A* Scale Factor</th>
            <th>Dijkstra Scale Factor</th>
            <th>Dijkstra Penalty</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>No Obstacles (0%)</td>
            <td>4.21×</td>
            <td>14.27×</td>
            <td>3.39× worse scaling</td>
          </tr>
          <tr>
            <td>Moderate Obstacles (20%)</td>
            <td>5.20×</td>
            <td>13.40×</td>
            <td>2.58× worse scaling</td>
          </tr>
          <tr>
            <td>High Obstacles (50%)</td>
            <td>4.44×</td>
            <td>6.12×</td>
            <td>1.38× worse scaling</td>
          </tr>
          <tr style="background:#0f172a;">
            <td><strong>Scenario-Balanced Average</strong></td>
            <td><strong>4.59×</strong></td>
            <td><strong>12.11×</strong></td>
            <td><strong>2.64× worse scaling</strong></td>
          </tr>
        </tbody>
      </table>`,
    'scale-time': `
      <h4>Runtime Scale Factors</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Scenario</th>
            <th>A* Scale Factor</th>
            <th>Dijkstra Scale Factor</th>
            <th>Dijkstra Penalty</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>No Obstacles (0%)</td>
            <td>5.14×</td>
            <td>10.89×</td>
            <td>2.12× worse scaling</td>
          </tr>
          <tr>
            <td>Moderate Obstacles (20%)</td>
            <td>4.03×</td>
            <td>12.22×</td>
            <td>3.03× worse scaling</td>
          </tr>
          <tr>
            <td>High Obstacles (50%)</td>
            <td>2.28×</td>
            <td>3.84×</td>
            <td>1.68× worse scaling</td>
          </tr>
          <tr style="background:#0f172a;">
            <td><strong>Scenario-Balanced Average</strong></td>
            <td><strong>3.46×</strong></td>
            <td><strong>10.06×</strong></td>
            <td><strong>2.91× worse scaling</strong></td>
          </tr>
        </tbody>
      </table>`,
    'efficiency-nodes': `
      <h4>Node Expansion Reductions</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Grid Size</th>
            <th>No Obstacles (0%)</th>
            <th>Moderate Obstacles (20%)</th>
            <th>High Obstacles (50%)</th>
            <th>Average</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>8×8 Grid</td>
            <td>77.78%</td>
            <td>71.70%</td>
            <td style="color:#fbbf24">26.47%</td>
            <td><strong>58.65%</strong></td>
          </tr>
          <tr>
            <td>30×30 Grid</td>
            <td>93.44%</td>
            <td>89.01%</td>
            <td>46.63%</td>
            <td><strong>76.36%</strong></td>
          </tr>
        </tbody>
      </table>`,
    'efficiency-time': `
      <h4>Runtime Reductions</h4>
      <table class="tbl">
        <thead>
          <tr>
            <th>Grid Size</th>
            <th>No Obstacles (0%)</th>
            <th>Moderate Obstacles (20%)</th>
            <th>High Obstacles (50%)</th>
            <th>Average</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>8×8 Grid</td>
            <td>80.73%</td>
            <td>55.17%</td>
            <td style="color:#fbbf24">9.33%</td>
            <td><strong>48.41%</strong></td>
          </tr>
          <tr>
            <td>30×30 Grid</td>
            <td>90.90%</td>
            <td>85.23%</td>
            <td>46.18%</td>
            <td><strong>74.10%</strong></td>
          </tr>
        </tbody>
      </table>`,
    'pooled-nodes': `
      <table class="tbl">
        <thead>
          <tr>
            <th>Metric</th>
            <th>A* Total</th>
            <th>Dijkstra Total</th>
            <th>Speedup Factor</th>
            <th>A* Reduction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Node Expansions</strong></td>
            <td>302 nodes</td>
            <td>1,967 nodes</td>
            <td>6.51×</td>
            <td>84.68%</td>
          </tr>
        </tbody>
      </table>`,
    'pooled-time': `
      <table class="tbl">
        <thead>
          <tr>
            <th>Metric</th>
            <th>A* Total</th>
            <th>Dijkstra Total</th>
            <th>Speedup Factor</th>
            <th>A* Reduction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Runtime</strong></td>
            <td>0.000744 sec</td>
            <td>0.003959 sec</td>
            <td>5.32×</td>
            <td>81.28%</td>
          </tr>
        </tbody>
      </table>`
  };

  // Dynamic chart and table system
  function updateQuantitativeAnalysis() {
    const selected = document.getElementById('analysisType').value;
    const [analysisType, metric] = selected.split('-');
    const canvas = document.getElementById('quantChart');
    const legend = document.getElementById('quantLegend');
    const description = document.getElementById('chartDescription');
    const tablesContainer = document.getElementById('quantTables');
    
    if (!canvas || !legend || !description || !tablesContainer) return;
    
    // Chart data for each analysis type
    const chartData = {
      'speedup-nodes': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', grid8: 4.50, grid30: 15.24},
        {scenario: 'Moderate Obstacles (20%)', grid8: 3.53, grid30: 9.10},
        {scenario: 'High Obstacles (50%)', grid8: 1.36, grid30: 1.87},
        {scenario: 'Average', grid8: 3.13, grid30: 8.74}
      ]},
      'speedup-time': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', grid8: 5.19, grid30: 10.99},
        {scenario: 'Moderate Obstacles (20%)', grid8: 2.23, grid30: 6.77},
        {scenario: 'High Obstacles (50%)', grid8: 1.10, grid30: 1.86},
        {scenario: 'Average', grid8: 2.84, grid30: 6.54}
      ]},
      'scale-nodes': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', astar: 4.21, dijkstra: 14.27},
        {scenario: 'Moderate Obstacles (20%)', astar: 5.20, dijkstra: 13.40},
        {scenario: 'High Obstacles (50%)', astar: 4.44, dijkstra: 6.12},
        {scenario: 'Average', astar: 4.59, dijkstra: 12.11}
      ]},
      'scale-time': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', astar: 5.14, dijkstra: 10.89},
        {scenario: 'Moderate Obstacles (20%)', astar: 4.03, dijkstra: 12.22},
        {scenario: 'High Obstacles (50%)', astar: 2.28, dijkstra: 3.84},
        {scenario: 'Average', astar: 3.46, dijkstra: 10.06}
      ]},
      'efficiency-nodes': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', grid8: 77.78, grid30: 93.44},
        {scenario: 'Moderate Obstacles (20%)', grid8: 71.70, grid30: 89.01},
        {scenario: 'High Obstacles (50%)', grid8: 26.47, grid30: 46.63},
        {scenario: 'Average', grid8: 58.65, grid30: 76.36}
      ]},
      'efficiency-time': {scenarios: ['No Obstacles (0%)', 'Moderate Obstacles (20%)', 'High Obstacles (50%)', 'Average'], data: [
        {scenario: 'No Obstacles (0%)', grid8: 80.73, grid30: 90.90},
        {scenario: 'Moderate Obstacles (20%)', grid8: 55.17, grid30: 85.23},
        {scenario: 'High Obstacles (50%)', grid8: 9.33, grid30: 46.18},
        {scenario: 'Average', grid8: 48.41, grid30: 74.10}
      ]},
      'pooled-nodes': {scenarios: ['Total'], data: [
        {scenario: 'Total', astar: 302, dijkstra: 1967}
      ]},
      'pooled-time': {scenarios: ['Total'], data: [
        {scenario: 'Total', astar: 0.000744, dijkstra: 0.003959}
      ]}
    };

    const configs = {
      speedup: {
        description: 'Higher bars indicate greater A* advantage.',
        legend: `<span style="display:inline-block;width:10px;height:10px;background:#f59e0b;border-radius:2px;margin-right:6px"></span>8×8 Grid &nbsp;&nbsp;
                 <span style="display:inline-block;width:10px;height:10px;background:#8b5cf6;border-radius:2px;margin-right:6px"></span>30×30 Grid`,
        colors: ['#f59e0b', '#8b5cf6'],
        yLabel: (m) => m === 'nodes' ? 'Speedup Factor (Dijkstra/A*)' : 'Time Speedup Factor'
      },
      scale: {
        description: 'How much more work when grid size increases.',
        legend: `<span style="display:inline-block;width:10px;height:10px;background:#4f83ff;border-radius:2px;margin-right:6px"></span>A* &nbsp;&nbsp;
                 <span style="display:inline-block;width:10px;height:10px;background:#34d399;border-radius:2px;margin-right:6px"></span>Dijkstra`,
        colors: ['#4f83ff', '#34d399'],
        yLabel: (m) => m === 'nodes' ? 'Scale Factor (30×30 cost / 8×8 cost)' : 'Time Scale Factor'
      },
      efficiency: {
        description: 'Percentage reduction achieved by A*.',
        legend: `<span style="display:inline-block;width:10px;height:10px;background:#f59e0b;border-radius:2px;margin-right:6px"></span>8×8 Grid &nbsp;&nbsp;
                 <span style="display:inline-block;width:10px;height:10px;background:#8b5cf6;border-radius:2px;margin-right:6px"></span>30×30 Grid`,
        colors: ['#f59e0b', '#8b5cf6'],
        yLabel: (m) => m === 'nodes' ? 'Node Expansion Reduction (%)' : 'Runtime Reduction (%)'
      },
      pooled: {
        description: 'Aggregated performance across all test conditions.',
        legend: `<span style="display:inline-block;width:10px;height:10px;background:#4f83ff;border-radius:2px;margin-right:6px"></span>A* &nbsp;&nbsp;
                 <span style="display:inline-block;width:10px;height:10px;background:#34d399;border-radius:2px;margin-right:6px"></span>Dijkstra`,
        colors: ['#4f83ff', '#34d399'],
        yLabel: (m) => m === 'nodes' ? 'Total Node Expansions' : 'Total Runtime (sec)'
      }
    };
    
    // Update UI elements
    const config = configs[analysisType];
    if (!config) return;
    
    description.textContent = config.description;
    legend.innerHTML = config.legend;
    
    // Update table
    if (TABLE_TEMPLATES[selected]) {
      tablesContainer.innerHTML = TABLE_TEMPLATES[selected];
    }
    
    // Draw chart
    drawQuantChart(selected, config);
  }

  function drawQuantChart(selectedType, config) {
    const canvas = document.getElementById('quantChart');
    const ctx = canvas.getContext('2d');
    
    // HiDPI scaling
    const DPR = window.devicePixelRatio || 1;
    const cssW = canvas.clientWidth || canvas.width;
    const cssH = canvas.clientHeight || canvas.height;
    canvas.width = Math.max(1, Math.floor(cssW * DPR));
    canvas.height = Math.max(1, Math.floor(cssH * DPR));
    ctx.setTransform(1,0,0,1,0,0);
    ctx.scale(DPR, DPR);

    const W = cssW, H = cssH;
    let padR = 20, padT = 22, padB = 48, padL = 80;

    // Get data for this chart type
    const chartData = {
      'speedup-nodes': [
        {scenario: 'No Obstacles (0%)', val1: 4.50, val2: 15.24},
        {scenario: 'Moderate Obstacles (20%)', val1: 3.53, val2: 9.10},
        {scenario: 'High Obstacles (50%)', val1: 1.36, val2: 1.87},
        {scenario: 'Average', val1: 3.13, val2: 8.74}
      ],
      'speedup-time': [
        {scenario: 'No Obstacles (0%)', val1: 5.19, val2: 10.99},
        {scenario: 'Moderate Obstacles (20%)', val1: 2.23, val2: 6.77},
        {scenario: 'High Obstacles (50%)', val1: 1.10, val2: 1.86},
        {scenario: 'Average', val1: 2.84, val2: 6.54}
      ],
      'scale-nodes': [
        {scenario: 'No Obstacles (0%)', val1: 4.21, val2: 14.27},
        {scenario: 'Moderate Obstacles (20%)', val1: 5.20, val2: 13.40},
        {scenario: 'High Obstacles (50%)', val1: 4.44, val2: 6.12},
        {scenario: 'Average', val1: 4.59, val2: 12.11}
      ],
      'scale-time': [
        {scenario: 'No Obstacles (0%)', val1: 5.14, val2: 10.89},
        {scenario: 'Moderate Obstacles (20%)', val1: 4.03, val2: 12.22},
        {scenario: 'High Obstacles (50%)', val1: 2.28, val2: 3.84},
        {scenario: 'Average', val1: 3.46, val2: 10.06}
      ],
      'efficiency-nodes': [
        {scenario: 'No Obstacles (0%)', val1: 77.78, val2: 93.44},
        {scenario: 'Moderate Obstacles (20%)', val1: 71.70, val2: 89.01},
        {scenario: 'High Obstacles (50%)', val1: 26.47, val2: 46.63},
        {scenario: 'Average', val1: 58.65, val2: 76.36}
      ],
      'efficiency-time': [
        {scenario: 'No Obstacles (0%)', val1: 80.73, val2: 90.90},
        {scenario: 'Moderate Obstacles (20%)', val1: 55.17, val2: 85.23},
        {scenario: 'High Obstacles (50%)', val1: 9.33, val2: 46.18},
        {scenario: 'Average', val1: 48.41, val2: 74.10}
      ],
      'pooled-nodes': [
        {scenario: 'Total', val1: 302, val2: 1967}
      ],
      'pooled-time': [
        {scenario: 'Total', val1: 0.000744, val2: 0.003959}
      ]
    };

    const groups = chartData[selectedType] || [];
    const vals = groups.flatMap(g => [g.val1, g.val2]);
    const maxRaw = Math.max(...vals, 0);
    let step = niceStep(maxRaw, 5);
    let ymax = Math.max(step, Math.ceil(maxRaw / step) * step);
    let ticksCount = Math.round(ymax / step);

    const chartW = Math.max(1, W - padL - padR);
    const chartH = Math.max(1, H - padT - padB);

    ctx.clearRect(0,0,W,H);
    const border = '#223041', muted = '#9fb0c8', fg = '#e8f0ff';

    // Axes + grid
    ctx.strokeStyle = border; ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(padL, padT); ctx.lineTo(padL, padT+chartH); ctx.lineTo(padL+chartW, padT+chartH); ctx.stroke();
    ctx.fillStyle = muted; ctx.textAlign='right'; ctx.font = '12px system-ui';
    for(let i=0;i<=ticksCount;i++){
      const y = padT + chartH - (i/ticksCount)*chartH;
      ctx.beginPath(); ctx.moveTo(padL, y); ctx.lineTo(padL+chartW, y); ctx.stroke();
      const val = i * step;
      const label = selectedType.includes('pooled-time') ? val.toFixed(6) : val.toFixed(1);
      ctx.fillText(label, padL-6, y+4);
    }

    // Bars
    const [col1, col2] = config.colors;
    if (selectedType.startsWith('pooled')) {
      // Single group for pooled
      const g = groups[0];
      const centerX = padL + chartW/2;
      const barW = 80;
      const h1 = (g.val1 / ymax) * chartH;
      const h2 = (g.val2 / ymax) * chartH;
      
      ctx.fillStyle = col1; ctx.fillRect(centerX - barW - 20, padT + chartH - h1, barW, h1);
      ctx.fillStyle = col2; ctx.fillRect(centerX + 20, padT + chartH - h2, barW, h2);
      
      ctx.textAlign = 'center'; ctx.fillStyle = muted; ctx.font = '12px system-ui';
      ctx.fillText('A*', centerX - barW/2 - 20, H - 10);
      ctx.fillText('Dijkstra', centerX + barW/2 + 20, H - 10);
    } else {
      // Multiple groups
      const n = groups.length;
      const groupW = chartW / Math.max(1, n);
      const barW = Math.min(30, Math.max(6, (groupW - 16)/2));
      ctx.textAlign = 'center';
      groups.forEach((g,i) => {
        const gx = padL + i*groupW + groupW/2;
        const h1 = (g.val1 / ymax) * chartH;
        const h2 = (g.val2 / ymax) * chartH;
        ctx.fillStyle = col1; ctx.fillRect(gx - barW - 3, padT + chartH - h1, barW, h1);
        ctx.fillStyle = col2; ctx.fillRect(gx + 3, padT + chartH - h2, barW, h2);
        
        let displayLabel = g.scenario;
        if (g.scenario.includes('No Obstacles')) displayLabel = 'No Obstacles (0%)';
        else if (g.scenario.includes('Moderate')) displayLabel = 'Moderate Obstacles (20%)';
        else if (g.scenario.includes('High')) displayLabel = 'High Obstacles (50%)';
        else if (g.scenario === 'Average' && selectedType.startsWith('scale')) displayLabel = 'Balanced Average';
        else if (g.scenario === 'Average') displayLabel = 'Average';
        
        ctx.fillStyle = muted; ctx.font = '12px system-ui';
        ctx.fillText(displayLabel, gx, H - 10);
      });
    }

    ctx.textAlign = 'left'; ctx.fillStyle = fg;
    const [, metricType] = selectedType.split('-');
    ctx.fillText(config.yLabel(metricType), padL, 16);
  }

  // Event listeners  
  document.getElementById('analysisType').addEventListener('change', updateQuantitativeAnalysis);
  window.addEventListener('resize', updateQuantitativeAnalysis);
  
  // Initial load
  updateQuantitativeAnalysis();
})();
</script>

</body>
</html>